(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{156:function(t,e,n){},159:function(t,e,n){},160:function(t,e,n){"use strict";n.r(e);var a=n(4),c=n.n(a),r=n(67),o=n.n(r),i=(n(156),n(7)),s=n(8),l=n(3),u=n(9),h=n(10),d=n(0),f=n(1),p=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={symbols:[],fields:{date:"",currentSymbol:""}},a.handleChange=a.handleChange.bind(Object(l.a)(a)),a.handleClick=a.handleClick.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("http://localhost:8000/stocks/symbols/",{}).then((function(t){return t.json()})).then((function(e){t.setState({symbols:e.symbols})}))}},{key:"handleClick",value:function(){this.props.onSearch(this.state.fields)}},{key:"handleChange",value:function(t){var e=this.state.fields;e[t.target.name]=t.target.value,this.setState({fields:e})}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"date",placeholder:"Enter date",name:"date",value:this.state.fields.date,onChange:this.handleChange}),Object(f.jsx)("select",{name:"currentSymbol",value:this.state.fields.currentSymbol,onChange:this.handleChange,children:this.state.symbols.map((function(t){return Object(f.jsx)("option",{value:t,children:t})}))}),Object(f.jsx)("button",{onClick:this.handleClick,children:"Submit"})]})}}]),n}(a.Component),m=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={stocks:[]},a.handleSearch=a.handleSearch.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"handleSearch",value:function(t){var e=this,n=d.n("%Y-%m-%d");fetch("http://localhost:8000/stocks/get-stocks/",{method:"POST",body:JSON.stringify({symbol:t.currentSymbol,date:t.date}),headers:{"Content-Type":"application/json",accept:"application/json"}}).then((function(t){return t.json()})).then((function(t){e.setState({stocks:t.map((function(t){return t.date=n(t.date),t.open=t.open_price,t}))}),e.drawChart(e.state.stocks)}))}},{key:"formatChange",value:function(t,e){return d.c("+.2%")((e-t)/t)}},{key:"componentDidMount",value:function(){var t=this,e=d.n("%Y-%m-%d");fetch("http://localhost:8000/stock/",{}).then((function(t){return t.json()})).then((function(n){t.setState({stocks:n.slice(-100).map((function(t){return t.date=e(t.date),t.open=t.open_price,t}))}),t.drawChart(t.state.stocks)}))}},{key:"drawChart",value:function(t){var e=this;document.querySelector(".chart-area").innerHTML="";var n=1e3,a=20,c=30,r=30,o=40,i=d.j(".chart-area").append("svg").attr("width",n).attr("height",500),s=d.f().domain(d.k.range(t[0].date,+t[t.length-1].date+1).filter((function(t){return 0!==t.getUTCDay()&&6!==t.getUTCDay()}))).range([o,n-c]).padding(.2),l=d.h().domain([d.e(t,(function(t){return t.low})),d.d(t,(function(t){return t.high}))]).rangeRound([500-r,a]),u=d.l("%B %-d, %Y"),h=d.c(".2f");i.append("g").call((function(e){return e.attr("transform","translate(0,".concat(500-r,")")).call(d.a(s).tickValues(d.m.every(1).range(t[0].date,t[t.length-1].date)).tickFormat(d.l("%-m/%-d"))).call((function(t){return t.select(".domain").remove()}))})),i.append("g").call((function(t){return t.attr("transform","translate(".concat(o,",0)")).call(d.b(l).tickFormat(d.c("$~f")).tickValues(d.g().domain(l.domain()).ticks())).call((function(t){return t.selectAll(".tick line").clone().attr("stroke-opacity",.2).attr("x2",n-o-c)})).call((function(t){return t.select(".domain").remove()}))}));var f=i.append("g").attr("stroke-linecap","round").attr("stroke","black").selectAll("g").data(t).join("g").attr("transform",(function(t){return"translate(".concat(s(t.date),",0)")}));f.append("line").attr("y1",(function(t){return l(t.low)})).attr("y2",(function(t){return l(t.high)})),f.append("line").attr("y1",(function(t){return l(t.open)})).attr("y2",(function(t){return l(t.close)})).attr("stroke-width",s.bandwidth()).attr("stroke",(function(t){return t.open>t.close?d.i[0]:t.close>t.open?d.i[2]:d.i[8]})),f.append("title").text((function(t){return"".concat(u(t.date),"\n            Open: ").concat(t.open,"\n            Close: ").concat(h(t.close)," (").concat(e.formatChange(t.open,t.close),")\n            Low: ").concat(h(t.low),"\n            High: ").concat(h(t.high))}))}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)(p,{onSearch:this.handleSearch})})}}]),n}(c.a.Component);n(159);var b=function(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)(m,{})}),Object(f.jsx)("div",{className:"chart-area"})]})},j=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root")),j()}},[[160,1,2]]]);
//# sourceMappingURL=main.b3f9d6c5.chunk.js.map